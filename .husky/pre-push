#!/usr/bin/env sh

echo "🚀 Running pre-push checks..."

# 1. Type checking
echo "🔍 Type checking..."
cd app/frontend && npx tsc --noEmit
if [ $? -ne 0 ]; then
  echo "❌ Type checking failed!"
  exit 1
fi
cd ../..

# 2. Linting
echo "🎨 Linting..."
cd app/frontend && npm run lint
if [ $? -ne 0 ]; then
  echo "❌ Linting failed!"
  exit 1
fi
cd ../..

# 3. Tests
echo "🧪 Running tests..."
cd app/frontend && npm run test -- --run
if [ $? -ne 0 ]; then
  echo "❌ Tests failed!"
  exit 1
fi
cd ../..

# 4. Build check
echo "🏗️ Build check..."
cd app/frontend && npm run build
if [ $? -ne 0 ]; then
  echo "❌ Build failed!"
  exit 1
fi
cd ../..

echo "✅ All pre-push checks passed!"
