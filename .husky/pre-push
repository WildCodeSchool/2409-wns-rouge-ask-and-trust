#!/usr/bin/env sh

echo "ğŸš€ Running pre-push checks..."

# 1. Type checking
echo "ğŸ” Type checking..."
cd app/frontend && npx tsc --noEmit
if [ $? -ne 0 ]; then
  echo "âŒ Type checking failed!"
  exit 1
fi
cd ../..

# 2. Linting
echo "ğŸ¨ Linting..."
cd app/frontend && npm run lint
if [ $? -ne 0 ]; then
  echo "âŒ Linting failed!"
  exit 1
fi
cd ../..

# 3. Tests
echo "ğŸ§ª Running tests..."
cd app/frontend && npm run test -- --run
if [ $? -ne 0 ]; then
  echo "âŒ Tests failed!"
  exit 1
fi
cd ../..

# 4. Build check
echo "ğŸ—ï¸ Build check..."
cd app/frontend && npm run build
if [ $? -ne 0 ]; then
  echo "âŒ Build failed!"
  exit 1
fi
cd ../..

echo "âœ… All pre-push checks passed!"
